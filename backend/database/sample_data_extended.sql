-- =============================================
-- ข้อมูลตัวอย่างเพิ่มเติมสำหรับระบบติดตามรถส่งน้ำแข็ง
-- ใช้สำหรับทดสอบระบบและแสดงผล
-- =============================================

USE ice_tracking;

-- =============================================
-- เพิ่มข้อมูล GPS Logs ตัวอย่าง
-- =============================================
INSERT INTO gps_logs (truck_id, latitude, longitude, speed, direction, altitude, accuracy, battery_level, signal_strength, timestamp) VALUES 
-- ข้อมูล GPS สำหรับ TRK001 (รถคันที่ 1)
('TRK001', 13.7563, 100.5018, 45.5, 90.0, 15.2, 5.0, 85, 4, '2024-01-20 08:00:00'),
('TRK001', 13.7580, 100.5030, 52.3, 95.0, 16.1, 4.8, 84, 4, '2024-01-20 08:05:00'),
('TRK001', 13.7600, 100.5050, 48.7, 88.0, 17.3, 5.2, 83, 4, '2024-01-20 08:10:00'),
('TRK001', 13.7620, 100.5070, 55.1, 92.0, 18.5, 4.5, 82, 4, '2024-01-20 08:15:00'),
('TRK001', 13.7651, 100.5380, 0.0, 0.0, 20.0, 3.8, 81, 4, '2024-01-20 09:30:00'), -- ถึงร้าน SHP002

-- ข้อมูล GPS สำหรับ TRK002 (รถคันที่ 2)
('TRK002', 13.8200, 100.5140, 38.2, 85.0, 22.1, 6.0, 90, 3, '2024-01-20 08:30:00'),
('TRK002', 13.8250, 100.5180, 42.8, 88.0, 23.5, 5.5, 89, 3, '2024-01-20 08:35:00'),
('TRK002', 13.8300, 100.5220, 46.3, 90.0, 24.8, 5.2, 88, 3, '2024-01-20 08:40:00'),
('TRK002', 13.8350, 100.5260, 41.7, 87.0, 26.1, 5.8, 87, 3, '2024-01-20 08:45:00'),
('TRK002', 13.8500, 100.5300, 0.0, 0.0, 28.0, 4.2, 86, 3, '2024-01-20 10:00:00'), -- ถึงร้าน SHP005

-- ข้อมูล GPS สำหรับ TRK003 (รถคันที่ 3)
('TRK003', 13.8700, 100.5500, 35.6, 82.0, 30.2, 7.0, 88, 2, '2024-01-20 09:00:00'),
('TRK003', 13.8750, 100.5550, 39.4, 85.0, 31.8, 6.5, 87, 2, '2024-01-20 09:05:00'),
('TRK003', 13.8800, 100.5600, 43.1, 88.0, 33.2, 6.2, 86, 2, '2024-01-20 09:10:00'),
('TRK003', 13.8850, 100.5650, 37.8, 84.0, 34.5, 6.8, 85, 2, '2024-01-20 09:15:00'),
('TRK003', 13.8900, 100.5800, 0.0, 0.0, 36.0, 5.5, 84, 2, '2024-01-20 09:20:00'), -- ถึงร้าน SHP006

-- ข้อมูล GPS สำหรับ TRK004 (รถคันที่ 4)
('TRK004', 13.7563, 100.5018, 32.1, 80.0, 12.5, 8.0, 92, 3, '2024-01-20 08:15:00'),
('TRK004', 13.7580, 100.5030, 36.7, 83.0, 13.8, 7.5, 91, 3, '2024-01-20 08:20:00'),
('TRK004', 13.7600, 100.5050, 40.2, 86.0, 15.1, 7.2, 90, 3, '2024-01-20 08:25:00'),
('TRK004', 13.7620, 100.5070, 34.9, 81.0, 16.4, 7.8, 89, 3, '2024-01-20 08:30:00'),
('TRK004', 13.7948, 100.5500, 0.0, 0.0, 18.0, 6.5, 88, 3, '2024-01-20 09:45:00'); -- ถึงร้าน SHP003

-- =============================================
-- เพิ่มข้อมูล Tracking ตัวอย่าง
-- =============================================
INSERT INTO tracking (tracking_code, shop_id, latitude, longitude, truck_id, driver_id, gps_code, speed, direction, timestamp) VALUES 
-- การติดตามสำหรับ TRK001
('TRK001_001', 1, 13.7563, 100.5018, 1, 1, 'GPS001', 0.0, 0.0, '2024-01-20 08:00:00'),
('TRK001_002', 2, 13.7651, 100.5380, 1, 1, 'GPS001', 0.0, 0.0, '2024-01-20 09:30:00'),
('TRK001_003', 3, 13.7948, 100.5500, 1, 1, 'GPS001', 0.0, 0.0, '2024-01-20 11:00:00'),

-- การติดตามสำหรับ TRK002
('TRK002_001', 4, 13.8200, 100.5140, 2, 2, 'GPS002', 0.0, 0.0, '2024-01-20 08:30:00'),
('TRK002_002', 5, 13.8500, 100.5300, 2, 2, 'GPS002', 0.0, 0.0, '2024-01-20 10:00:00'),

-- การติดตามสำหรับ TRK003
('TRK003_001', 6, 13.8700, 100.5500, 3, 3, 'GPS003', 0.0, 0.0, '2024-01-20 09:00:00'),

-- การติดตามสำหรับ TRK004
('TRK004_001', 1, 13.7563, 100.5018, 4, 4, 'GPS004', 0.0, 0.0, '2024-01-20 08:15:00'),
('TRK004_002', 3, 13.7948, 100.5500, 4, 4, 'GPS004', 0.0, 0.0, '2024-01-20 09:45:00');

-- =============================================
-- อัปเดตข้อมูลตำแหน่งล่าสุดในตาราง trucks
-- =============================================
UPDATE trucks SET 
    latitude = 13.7948, 
    longitude = 100.5500, 
    updated_at = '2024-01-20 11:00:00' 
WHERE truck_id = 'TRK001';

UPDATE trucks SET 
    latitude = 13.8500, 
    longitude = 100.5300, 
    updated_at = '2024-01-20 10:00:00' 
WHERE truck_id = 'TRK002';

UPDATE trucks SET 
    latitude = 13.8900, 
    longitude = 100.5800, 
    updated_at = '2024-01-20 09:20:00' 
WHERE truck_id = 'TRK003';

UPDATE trucks SET 
    latitude = 13.7948, 
    longitude = 100.5500, 
    updated_at = '2024-01-20 09:45:00' 
WHERE truck_id = 'TRK004';

-- =============================================
-- เพิ่มข้อมูลการแจ้งเตือนเพิ่มเติม
-- =============================================
INSERT INTO alerts (truck_code, driver_code, truck_id, driver_id, type, message, priority, is_read, location_data) VALUES 
('TRK001', 'DRV001', 1, 1, 'idle_too_long', 'รถ TRK001 หยุดนิ่งเกิน 30 นาที', 'medium', FALSE, '{"lat": 13.7948, "lng": 100.5500}'),
('TRK002', 'DRV002', 2, 2, 'off_route', 'รถ TRK002 ออกจากเส้นทางที่กำหนด', 'high', FALSE, '{"lat": 13.8500, "lng": 100.5300}'),
('TRK003', 'DRV003', 3, 3, 'emergency', 'รถ TRK003 ขอความช่วยเหลือฉุกเฉิน', 'critical', FALSE, '{"lat": 13.8900, "lng": 100.5800}'),
('TRK004', 'DRV004', 4, 4, 'manual', 'รถ TRK004 รายงานปัญหาการส่งสินค้า', 'medium', FALSE, '{"lat": 13.7948, "lng": 100.5500}');

-- =============================================
-- เพิ่มข้อมูลการส่งสินค้าที่เสร็จสิ้นแล้ว
-- =============================================
INSERT INTO deliveries (delivery_code, route_detail_id, truck_id, driver_id, shop_id, delivery_date, scheduled_time, actual_start_time, actual_end_time, status, quantity, unit, notes) VALUES 
('DEL006', 1, 'TRK001', 'DRV001', 'SHP001', '2024-01-19', '08:00:00', '2024-01-19 08:05:00', '2024-01-19 08:35:00', 'delivered', 100, 'kg', 'ส่งสินค้าสำเร็จ'),
('DEL007', 2, 'TRK001', 'DRV001', 'SHP002', '2024-01-19', '09:30:00', '2024-01-19 09:35:00', '2024-01-19 10:20:00', 'delivered', 150, 'kg', 'ส่งสินค้าสำเร็จ'),
('DEL008', 4, 'TRK002', 'DRV002', 'SHP004', '2024-01-19', '08:30:00', '2024-01-19 08:35:00', '2024-01-19 09:15:00', 'delivered', 120, 'kg', 'ส่งสินค้าสำเร็จ'),
('DEL009', 5, 'TRK002', 'DRV002', 'SHP005', '2024-01-19', '10:00:00', '2024-01-19 10:05:00', '2024-01-19 10:55:00', 'delivered', 180, 'kg', 'ส่งสินค้าสำเร็จ');

-- =============================================
-- เพิ่มข้อมูลการบำรุงรักษาที่เสร็จสิ้นแล้ว
-- =============================================
INSERT INTO maintenance (truck_id, maintenance_type, description, scheduled_date, actual_date, cost, status, service_provider, next_maintenance_date, notes, created_by) VALUES 
('TRK001', 'routine', 'เปลี่ยนน้ำมันเครื่องและกรองอากาศ', '2024-01-15', '2024-01-15', 2500.00, 'completed', 'ศูนย์บริการ ISUZU', '2024-04-15', 'บำรุงรักษาเสร็จสิ้น', 1),
('TRK002', 'inspection', 'ตรวจสอบระบบเบรกและยาง', '2024-01-10', '2024-01-10', 1500.00, 'completed', 'ศูนย์บริการ HINO', '2024-04-10', 'ตรวจสอบเสร็จสิ้น', 1),
('TRK003', 'repair', 'ซ่อมแซมระบบแอร์', '2024-01-05', '2024-01-05', 3500.00, 'completed', 'อู่ซ่อมรถยนต์', '2024-07-05', 'ซ่อมแซมเสร็จสิ้น', 1);

-- =============================================
-- เพิ่มข้อมูลน้ำมันเพิ่มเติม
-- =============================================
INSERT INTO fuel_logs (truck_id, driver_id, fuel_amount, fuel_cost, odometer_reading, fuel_station, receipt_number, fuel_date, notes) VALUES 
('TRK001', 'DRV001', 75.00, 2250.00, 14800, 'ปตท. สาขาสุขุมวิท', 'R001237', '2024-01-10', 'เติมน้ำมันก่อนออกเดินทาง'),
('TRK002', 'DRV002', 90.00, 2700.00, 17500, 'เชลล์ สาขารัชดาภิเษก', 'R001238', '2024-01-11', 'เติมน้ำมันก่อนออกเดินทาง'),
('TRK003', 'DRV003', 70.00, 2100.00, 11800, 'เอสโซ่ สาขาลาดพร้าว', 'R001239', '2024-01-12', 'เติมน้ำมันก่อนออกเดินทาง'),
('TRK004', 'DRV004', 65.00, 1950.00, 9500, 'ปตท. สาขาพหลโยธิน', 'R001240', '2024-01-13', 'เติมน้ำมันก่อนออกเดินทาง');

-- =============================================
-- เพิ่มการแจ้งเตือนระบบเพิ่มเติม
-- =============================================
INSERT INTO notifications (user_id, title, message, type, is_read, related_table, related_id) VALUES 
(1, 'การบำรุงรักษา', 'รถ TRK001 ถึงกำหนดบำรุงรักษาในอีก 7 วัน', 'warning', FALSE, 'maintenance', 1),
(2, 'การส่งสินค้า', 'การส่งสินค้า DEL001 เสร็จสิ้นแล้ว', 'success', FALSE, 'deliveries', 1),
(1, 'การแจ้งเตือน', 'มีรถ 1 คันที่ออกจากเส้นทาง', 'error', FALSE, 'alerts', 2),
(2, 'ข้อมูล GPS', 'ระบบ GPS ทำงานปกติ', 'info', FALSE, 'gps_logs', NULL);

-- =============================================
-- เพิ่มการตั้งค่าระบบเพิ่มเติม
-- =============================================
INSERT INTO system_settings (setting_key, setting_value, description, category, updated_by) VALUES 
('max_idle_time_minutes', '30', 'เวลาหยุดนิ่งสูงสุด (นาที)', 'alerts', 1),
('route_deviation_meters', '500', 'ระยะเบี่ยงเบนจากเส้นทาง (เมตร)', 'alerts', 1),
('fuel_efficiency_threshold', '8', 'ประสิทธิภาพน้ำมันต่ำสุด (กม./ลิตร)', 'fuel', 1),
('delivery_photo_required', 'true', 'ต้องถ่ายรูปการส่งสินค้า', 'delivery', 1),
('auto_route_optimization', 'true', 'ปรับเส้นทางอัตโนมัติ', 'routes', 1),
('emergency_contact', '02-123-4567', 'เบอร์โทรฉุกเฉิน', 'system', 1),
('company_name', 'บริษัทส่งน้ำแข็ง จำกัด', 'ชื่อบริษัท', 'system', 1),
('backup_interval_hours', '24', 'ช่วงเวลาสำรองข้อมูล (ชั่วโมง)', 'system', 1);

-- =============================================
-- เพิ่มข้อมูลเส้นทางเพิ่มเติม
-- =============================================
INSERT INTO routes (route_name, description, status, created_by) VALUES 
('เส้นทางส่งน้ำแข็งยามเช้า', 'เส้นทางสำหรับส่งน้ำแข็งในช่วงเช้า (06:00-10:00)', 'active', 1),
('เส้นทางส่งน้ำแข็งยามบ่าย', 'เส้นทางสำหรับส่งน้ำแข็งในช่วงบ่าย (14:00-18:00)', 'active', 1),
('เส้นทางส่งน้ำแข็งฉุกเฉิน', 'เส้นทางสำหรับส่งน้ำแข็งฉุกเฉิน', 'active', 1);

-- เพิ่มรายละเอียดเส้นทางเพิ่มเติม
INSERT INTO route_details (route_id, truck_id, shop_id, delivery_order, estimated_time, estimated_duration, distance, status) VALUES 
(5, 'TRK001', 'SHP001', 1, '06:00:00', 25, 4.2, 'pending'),
(5, 'TRK001', 'SHP002', 2, '07:00:00', 30, 5.8, 'pending'),
(6, 'TRK002', 'SHP003', 1, '14:00:00', 35, 6.5, 'pending'),
(6, 'TRK002', 'SHP004', 2, '15:30:00', 40, 7.8, 'pending'),
(7, 'TRK003', 'SHP005', 1, '12:00:00', 20, 3.5, 'pending'),
(7, 'TRK003', 'SHP006', 2, '12:30:00', 25, 4.2, 'pending');

-- เพิ่มการมอบหมายเส้นทางเพิ่มเติม
INSERT INTO route_assignments (route_id, truck_id, driver_id, assigned_date, status, assigned_by, notes) VALUES 
(5, 'TRK001', 'DRV001', '2024-01-21', 'assigned', 1, 'เส้นทางส่งน้ำแข็งยามเช้า'),
(6, 'TRK002', 'DRV002', '2024-01-21', 'assigned', 1, 'เส้นทางส่งน้ำแข็งยามบ่าย'),
(7, 'TRK003', 'DRV003', '2024-01-21', 'assigned', 1, 'เส้นทางส่งน้ำแข็งฉุกเฉิน');

-- =============================================
-- สรุปข้อมูลที่เพิ่มเข้าไป
-- =============================================
SELECT 'Extended sample data inserted successfully!' as status;

SELECT 'Data Summary:' as info;
SELECT 'GPS Logs:' as table_name, COUNT(*) as count FROM gps_logs
UNION ALL
SELECT 'Tracking Records:', COUNT(*) FROM tracking
UNION ALL
SELECT 'Additional Alerts:', COUNT(*) FROM alerts WHERE id > 3
UNION ALL
SELECT 'Completed Deliveries:', COUNT(*) FROM deliveries WHERE status = 'delivered'
UNION ALL
SELECT 'Completed Maintenance:', COUNT(*) FROM maintenance WHERE status = 'completed'
UNION ALL
SELECT 'Additional Fuel Logs:', COUNT(*) FROM fuel_logs WHERE id > 3
UNION ALL
SELECT 'System Notifications:', COUNT(*) FROM notifications
UNION ALL
SELECT 'System Settings:', COUNT(*) FROM system_settings
UNION ALL
SELECT 'Additional Routes:', COUNT(*) FROM routes WHERE id > 4
UNION ALL
SELECT 'Additional Route Details:', COUNT(*) FROM route_details WHERE id > 8
UNION ALL
SELECT 'Additional Route Assignments:', COUNT(*) FROM route_assignments WHERE id > 4;
